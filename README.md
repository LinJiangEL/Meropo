# Meropo AI音乐生成&品鉴

这是一个基于Python tkinter的音乐生成GUI界面，集成了AI音乐生成和音乐鉴赏功能。

## 功能特性

### 🎼 文本生成音乐
- 通过文本描述和歌词生成音乐
- 支持多种音频格式（WAV、MP3、OGG、FLAC）
- 可调节的生成参数（推理步数、引导比例等）
- LoRA模型支持
- 实时生成历史记录

### 🎨 音频重绘
- 对已生成的音频进行局部重绘
- 可指定重绘的时间范围
- 支持多种重绘源选择

### ✏️ 音频编辑
- 支持歌词编辑和混音编辑
- 可调节编辑强度范围
- 保持音频质量的同时进行修改

### ⏱️ 音频扩展
- 在音频前后添加新的内容
- 可指定左右扩展长度
- 保持音乐风格的一致性

### 🤖 AI音乐鉴赏
- 集成AI音乐鉴赏家功能
- 支持中英文对话
- 提供非感性的音乐分析和建议

## 安装要求

1. Python 3.10+
2. 安装依赖包：
```bash
pip install -r requirements.txt
```

## 环境配置

1. 创建 `.env` 文件并配置API密钥：
```
KIMI_APIKEY=your_kimi_api_key_here
```

2. 确保网络连接正常，能够访问音乐生成API

## 使用方法

### 启动GUI界面
```bash
python music_gui.py
```

### 基本操作流程

1. **生成音乐**：
   - 切换到"🎼 文本生成音乐"标签页
   - 输入音乐标签（如：funk, pop, rock, 120 BPM）
   - 输入歌词（可选）
   - 调整生成参数
   - 点击"🎵 生成音乐"按钮

2. **音频处理**：
   - 生成音乐后，可以使用其他标签页的功能
   - 重绘：修改特定时间段的音频
   - 编辑：修改歌词或进行混音
   - 扩展：在音频前后添加内容

3. **AI咨询**：
   - 切换到"🤖 AI音乐鉴赏"标签页
   - 提交音频并与AI音乐鉴赏家进行对话

## 参数说明(详见ACE-Step官方文档)

### 基本参数
- **音乐标签**：描述音乐风格、乐器、节奏等
- **歌词**：歌曲的歌词内容
- **音频格式**：输出文件的格式
- **音频时长**：生成音频的长度（-1表示默认长度）

### 高级参数
- **推理步数**：生成过程中的步数，影响质量和速度
- **引导比例**：控制生成结果与提示的匹配程度
- **调度器类型**：euler、heun、pingpong
- **CFG类型**：cfg、apg、cfg_star

### LoRA设置
- **LoRA模型**：选择特定的LoRA模型
- **LoRA权重**：控制LoRA模型的影响程度

## 注意事项

1. **网络连接**：确保能够访问音乐生成API
2. **API密钥**：正确配置Kimi API密钥
3. **文件保存**：生成的音频文件会自动保存到桌面
4. **处理时间**：音乐生成可能需要较长时间，请耐心等待
5. **错误处理**：如果出现错误，请检查网络连接和API配置

## 故障排除

### 常见问题

1. **无法连接API**：
   - 检查网络连接
   - 验证API URL是否正确
   - 确认API服务是否可用

2. **生成失败**：
   - 检查参数设置是否合理
   - 确认输入内容格式正确
   - 查看错误信息进行调试

3. **界面无响应**：
   - 音乐生成过程较长，请耐心等待
   - 检查是否有错误弹窗

## 技术架构

- **前端**：Python tkinter GUI框架
- **后端**：MusicAPI和AI类
- **API**：Gradio客户端连接本地或远程部署的大模型
- **AI**：kimi-k2-0711-preview提供音乐鉴赏功能

## 更新日志

- v1.0.0：初始版本，包含基本音乐生成和AI聊天功能
- 支持多种音频处理功能
- 集成完整的参数调节界面
- 拥有了tkinter做的简陋的UI
。 
